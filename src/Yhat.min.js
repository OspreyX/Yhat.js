/*
Yhat - v1.0.0 - 2013-12-16
Javascript Library for Yhat API
Lovingly coded by yhat  - http://yhathq.com/ 
*/
function Yhat(a,b){this.username=a,this.apikey=b,this.ws,this.is_open=!1}function checkErrors(a){var a=JSON.parse(a);if(a.error&&a.message)throw new Error(a.message);return!0}Yhat.prototype.init=function(a,b){window.y_username=this.username,window.y_apikey=this.apikey,this.ws=new WebSocket("ws://"+a),this.ws.onmessage=function(a){var c=a.data;checkErrors(c),b&&b(c)},this.ws.onopen=function(){this.send(JSON.stringify({username:window.y_username,apikey:window.y_apikey})),console.log(this.readyState)}},Yhat.prototype.send=function(a){var b=this.ws;b.readyState?b.send(JSON.stringify(a)):setTimeout(function(){b.send(JSON.stringify(a))},1e3)},Yhat.prototype.close=function(){this.ws.close()};